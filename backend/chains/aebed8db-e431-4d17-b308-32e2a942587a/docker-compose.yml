version: '3.8'

services:
  sequencer:
    image: polygontechnology/polygon-zkevm-node:latest
    container_name: aebed8db-e431-4d17-b308-32e2a942587a-sequencer
    environment:
      - CHAIN_ID=aebed8db-e431-4d17-b308-32e2a942587a
      - RPC_URL=http://localhost:8545
      - ROLLUP_TYPE=validium
    ports:
      - "8545:8545"
      - "8546:8546"
    volumes:
      - ./data/sequencer:/data
      - ./config/genesis.json:/config/genesis.json
      - ./config/cdk-config.json:/config/cdk-config.json
    networks:
      - aebed8db-e431-4d17-b308-32e2a942587a-network
    restart: unless-stopped
    command: ["node", "--config", "/config/cdk-config.json"]
  validator-0:
    image: polygontechnology/polygon-zkevm-node:latest
    container_name: aebed8db-e431-4d17-b308-32e2a942587a-validator-0
    environment:
      - CHAIN_ID=aebed8db-e431-4d17-b308-32e2a942587a
      - NODE_TYPE=validator
      - VALIDATOR_INDEX=0
      - ROLLUP_TYPE=validium
    ports:
      - "9090:9090"
    volumes:
      - ./data/validator-0:/data
      - ./config/genesis.json:/config/genesis.json
      - ./config/cdk-config.json:/config/cdk-config.json
      - ./config/validators.json:/config/validators.json
    networks:
      - aebed8db-e431-4d17-b308-32e2a942587a-network
    restart: unless-stopped
    depends_on:
      - sequencer
    command: ["node", "--config", "/config/cdk-config.json", "--validator-index", "0"]
  validator-1:
    image: polygontechnology/polygon-zkevm-node:latest
    container_name: aebed8db-e431-4d17-b308-32e2a942587a-validator-1
    environment:
      - CHAIN_ID=aebed8db-e431-4d17-b308-32e2a942587a
      - NODE_TYPE=validator
      - VALIDATOR_INDEX=1
      - ROLLUP_TYPE=validium
    ports:
      - "9091:9090"
    volumes:
      - ./data/validator-1:/data
      - ./config/genesis.json:/config/genesis.json
      - ./config/cdk-config.json:/config/cdk-config.json
      - ./config/validators.json:/config/validators.json
    networks:
      - aebed8db-e431-4d17-b308-32e2a942587a-network
    restart: unless-stopped
    depends_on:
      - sequencer
    command: ["node", "--config", "/config/cdk-config.json", "--validator-index", "1"]
  validator-2:
    image: polygontechnology/polygon-zkevm-node:latest
    container_name: aebed8db-e431-4d17-b308-32e2a942587a-validator-2
    environment:
      - CHAIN_ID=aebed8db-e431-4d17-b308-32e2a942587a
      - NODE_TYPE=validator
      - VALIDATOR_INDEX=2
      - ROLLUP_TYPE=validium
    ports:
      - "9092:9090"
    volumes:
      - ./data/validator-2:/data
      - ./config/genesis.json:/config/genesis.json
      - ./config/cdk-config.json:/config/cdk-config.json
      - ./config/validators.json:/config/validators.json
    networks:
      - aebed8db-e431-4d17-b308-32e2a942587a-network
    restart: unless-stopped
    depends_on:
      - sequencer
    command: ["node", "--config", "/config/cdk-config.json", "--validator-index", "2"]
  validator-3:
    image: polygontechnology/polygon-zkevm-node:latest
    container_name: aebed8db-e431-4d17-b308-32e2a942587a-validator-3
    environment:
      - CHAIN_ID=aebed8db-e431-4d17-b308-32e2a942587a
      - NODE_TYPE=validator
      - VALIDATOR_INDEX=3
      - ROLLUP_TYPE=validium
    ports:
      - "9093:9090"
    volumes:
      - ./data/validator-3:/data
      - ./config/genesis.json:/config/genesis.json
      - ./config/cdk-config.json:/config/cdk-config.json
      - ./config/validators.json:/config/validators.json
    networks:
      - aebed8db-e431-4d17-b308-32e2a942587a-network
    restart: unless-stopped
    depends_on:
      - sequencer
    command: ["node", "--config", "/config/cdk-config.json", "--validator-index", "3"]


networks:
  aebed8db-e431-4d17-b308-32e2a942587a-network:
    driver: bridge
